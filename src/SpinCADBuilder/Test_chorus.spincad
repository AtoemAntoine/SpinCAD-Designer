@name Test_Chorus 
@audioInput adcl Input_Left
@audioOutput dacl Audio_Output_1  
@audioOutput dacr Audio_Output_2  

;@controlInput input0 Reverb_Level
;@controlInput input1 Chorus_Rate
;@controlInput input2 Effect_Level

; @author Spin Semiconductor
; @url http://www.spinsemi.com/Products/appnotes/spn1001/AN-0001.pdf

; From Application note AN-0001 
; Program AN0001-1.spn 
; 
; Memory declarations 
mem delayl  512 ; Left delay 
equ dacl REG0
equ dacr REG1

; Initialization, only run on first execution of code 
; Skip to the START label if NOT the first time 
skp run,START 
wlds SIN0,5,1024
START: 
ldax adcl 
wra delayl,0 
cho rda,SIN0,SIN|REG|COMPC,delayl^ 
cho rda,SIN0,SIN, delayl^+1
wrax dacl,0 
cho rdal, SIN0 
wrax dacr,0 
