@name Pitch_Up_Down
@audioInput input Input
@audioOutput pitch Pitch_Out
@audioOutput tempR Temp
@audioOutput phase1 Phase_1_Out 
@audioOutput phase2 Phase_2_Out

@isPinConnected Input
equ pitch reg0
equ phase1 reg2
equ phase2 reg3
equ tempR reg4

// establish the base address for this module
@getBaseAddress
// then allocate memory
mem delayd 4096
mem temp 1 

skp run, START 
wldr 0,8192,4096 
START: 
ldax input
wra delayd,0
			
cho rda,RMP0,REG|COMPC,delayd 
cho rda,RMP0,0,delayd+ 1 
wrax phase1, 0
wra temp,0 
cho rda,RMP0,RPTR2|COMPC,delayd 
cho rda,RMP0,RPTR2,delayd+ 1 
wrax phase2, 1
cho sof,RMP0,NA|COMPC,0 
wrax tempR, 0
cho rda,RMP0,NA,temp
wrax pitch,0

@setOutputPin Pitch_Out pitch
	
@setOutputPin Temp tempR
@setOutputPin Phase_1_Out phase1
@setOutputPin Phase_2_Out phase2

@endif

